(()=>{"use strict";var t={446:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Chromosome=void 0;class s{constructor(t,e,s){this.genes=[],this.fitness=0,this.randGene=e,this.randNum=s,this.genes=t,this.length=t.length}static generate(t,e,n){const o=[];for(let s=0;s<t;s++)o.push(e());return new s(o,e,n)}getFitness(){return this.fitness}setFitness(t){this.fitness=t}compare(t){let e=0;for(let s=0;s<Math.min(this.length,t.length);s++)e+=this.genes[s]!==t.genes[s]?1:0;return e}mutateWith(t=1/this.length,e){e(this,t)}crossoverWith(t,e){return e(this,t)}setGenes(t){this.genes=[...t]}getGenes(){return this.genes}copy(t){this.genes=t.genes.slice(),this.length=t.length,this.randGene=t.randGene,this.fitness=t.fitness}clone(){const t=s.generate(this.length,this.randGene,this.randNum);return t.copy(this),t}randomGene(){return this.randGene()}randomNumber(){return this.randNum()}}e.Chromosome=s},348:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.crossoverMethod=void 0,e.crossoverMethod={singlePoint:(t,e)=>{const s=Math.floor(t.randomNumber()*t.getGenes().length);return[[...t.getGenes().slice(0,s),...e.getGenes().slice(s)],[...e.getGenes().slice(0,s),...t.getGenes().slice(s)]]},twoPoint:(t,e)=>{const s=[],n=[],o=t.getGenes(),a=e.getGenes(),r=t.getGenes().length;let i=Math.floor(t.randomNumber()*r),h=Math.floor(t.randomNumber()*r);i>h&&([i,h]=[h,i]);for(let t=0;t<r;t++)s.push(t<i?o[t]:t<h?a[t]:o[t]),n.push(t<i?a[t]:t<h?o[t]:a[t]);return[s,n]},uniform:(t,e)=>{const s=[],n=[],o=t.getGenes(),a=e.getGenes(),r=t.getGenes().length;for(let e=0;e<r;e++){const r=t.randomNumber()<.5;s.push(r?a[e]:o[e]),n.push(r?o[e]:a[e])}return[s,n]},halfUniform:(t,e)=>{let s=[],n=[];const o=t.getGenes(),a=e.getGenes(),r=t.getGenes().length,i=[];for(let t=0;t<r;t++)o[t]!==a[t]&&i.push(t);const h=i.length;s=o.slice(),n=a.slice();for(let e=0;e<h/2;e++){let e=Math.floor(t.randomNumber()*i.length);s[i[e]]=a[i[e]],n[i[e]]=o[i[e]],i.splice(e,1)}return[s,n]},ordered:(t,e)=>{const s=[],n=[],o=t.getGenes(),a=e.getGenes(),r=t.getGenes().length;let i=Math.floor(t.randomNumber()*r),h=Math.floor(t.randomNumber()*r),l=i;i=Math.min(i,h),h=Math.max(l,h);for(let t=i;t<h;t++)s[t]=a[t],n[t]=o[t];for(let t=0;t<r;t++){if(-1===s.indexOf(o[t]))s[t]=o[t];else for(let e=0;e<r;e++)-1===s.indexOf(o[e])&&(s[t]=o[e]);if(-1===n.indexOf(a[t]))n[t]=a[t];else for(let e=0;e<a.length;e++)-1===n.indexOf(a[e])&&(n[t]=a[e])}return[s,n]}}},803:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Darwin=void 0;const n=s(446),o=s(348),a=s(666),r=s(675);e.Darwin=class{constructor(t){this.population=[],this.statsNeedUpdate=!0,this.generation=0,this.params=Object.assign({crossoverRate:.7,mutationRate:1/t.populationSize,crossoverMethod:o.crossoverMethod.singlePoint,mutationMethod:a.mutationMethod.flip,eliteCount:Math.ceil(t.populationSize/25),eliteCopies:1,randomNumber:Math.random},t);for(let e=0;e<t.populationSize;e++){const t=n.Chromosome.generate(this.params.chromosomeLength,this.params.randomGene,this.params.randomNumber);this.population.push(t)}this.stats={fittest:this.population[0],averageFitness:0,totalFitness:0,fittestIndex:0}}duplicateElite(t){const{eliteCount:e,eliteCopies:s}=this.params;if(e>0){const n=this.getTopChromosomes(e);t.push(...n);for(let o=0;o<e;o++)for(let e=0;e<s;e++)t.push(n[o].clone())}}crossover(t){const{populationSize:e,crossoverRate:s,crossoverMethod:o,randomGene:a,randomNumber:r}=this.params;for(;t.length<e;)if(this.params.randomNumber()<s){const e=this.getRandomChromosome(),s=this.getRandomChromosome(),[i,h]=e.crossoverWith(s,o);t.push(new n.Chromosome(i,a,r),new n.Chromosome(h,a,r))}this.params.populationSize%2==1&&t.pop()}mutate(t){for(const e of t)e.mutateWith(this.params.mutationRate,this.params.mutationMethod)}updateFitness(t){for(let e=0;e<this.population.length;e++){const s=this.population[e];s.setFitness(t(s.getGenes(),e))}}mate(){const t=[];this.duplicateElite(t),this.crossover(t),this.mutate(t),this.population=t,this.generation+=1,this.statsNeedUpdate=!0}getPopulation(){return this.population}getChromosomeAt(t){return this.population[t]}getRandomChromosome(){if(this.updateStats(),0===this.stats.totalFitness)return this.population[Math.floor(this.params.randomNumber()*this.population.length)];const t=this.params.randomNumber()*this.stats.totalFitness;let e=0;for(let s=0;s<this.population.length;s++)if(e+=this.population[s].getFitness(),e>t)return this.population[s];return this.population[0]}getTopChromosomes(t){return r.selectKBest(this.population,t)}getParams(){return this.params}getGeneration(){return this.generation}getStats(){return this.stats}updateStats(t=!1){if(t||this.statsNeedUpdate){let t=0,e=0,s=0;for(let n=0;n<this.population.length;n++){const o=this.population[n].getFitness();t+=o,o>e&&(e=o,s=n)}this.stats.totalFitness=t,this.stats.averageFitness=t/this.params.populationSize,this.stats.fittest=this.population[s].clone(),this.stats.fittestIndex=s,this.statsNeedUpdate=!1}return this.stats}}},827:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Deblurrer=e.renderBlurredText=void 0;const n=s(348),o=s(803),a=s(666),r=s(147),i=s(799);e.renderBlurredText=(t,e,s,n)=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),t.font=s,t.filter=`blur(${n}px)`,t.fillText(e,2,30)},e.Deblurrer=class{constructor(t){this.bestFitness=0,this.bestText="",this.memo=new Map,this.isRunning=!1,this.update=t=>{this.params=t,this.targetImageData=this.renderTarget(),this.population=new o.Darwin(this.updateDarwinParams()),this.bestFitness=0,this.bestText="",this.generateContexts()},this.targetContext=i.createCanvas({},{border:"1px solid black"})[1],this.update(t)}update(t){this.isRunning=!1,this.params=t,this.renderTarget(),this.updateDarwinParams(),this.generateContexts(),this.population=new o.Darwin(this.darwinParams),this.targetImageData=this.renderTarget()}updateDarwinParams(){return this.darwinParams={populationSize:this.params.populationSize,randomGene:r.randChar,chromosomeLength:this.params.target.length,mutationMethod:a.mutationMethod.flip,crossoverMethod:n.crossoverMethod.uniform,mutationRate:.1,crossoverRate:.95},this.darwinParams}renderTarget(){const{width:t}=((t,e)=>{const[s,n]=i.createCanvas({width:1e3,height:100});return n.font=e,n.measureText(t)})(this.params.target,this.params.font);return this.width=t+5,this.height=35,this.targetContext.canvas.width=this.width,this.targetContext.canvas.height=this.height,e.renderBlurredText(this.targetContext,this.params.target,this.params.font,this.params.blurRadius),this.targetContext.getImageData(0,0,this.width,this.height)}generateContexts(){this.contexts=[];for(let t=0;t<this.params.populationSize;t++)this.contexts.push(i.createCanvas({width:this.width,height:this.height},{border:"1px solid black"})[1])}tick(){this.memo.size>1e4&&this.memo.clear(),this.population.updateFitness(((t,s)=>{var n;const o=this.contexts[s],a=t.join("");if(e.renderBlurredText(o,a,this.params.font,this.params.blurRadius),!this.memo.has(a)){const t=((t,e)=>{let s=0;for(let n=0;n<t.data.length;n+=4){const o=Math.abs(e.data[n+3]-t.data[n+3]);s+=Math.pow(255-o,2)}return Math.pow(1e3,s/(Math.pow(255,2)*t.data.length/4))})(o.getImageData(0,0,this.width,this.height),this.targetImageData);t>this.bestFitness&&(this.bestFitness=t,this.bestText=a,console.log(this.bestText,this.bestFitness)),this.memo.set(a,t)}return null!==(n=this.memo.get(a))&&void 0!==n?n:0})),this.params.onTick&&this.params.onTick(),this.population.mate()}start(){this.isRunning=!0;const t=()=>{this.tick(),this.isRunning&&this.bestFitness<1e3&&requestAnimationFrame(t.bind(this))};t()}getCurrentBest(){return{string:this.bestText,fitness:this.bestFitness}}getTargetContext(){return this.targetContext}getPopulation(){return this.population}getContexts(){return this.contexts}}},147:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randChar=e.alphabet=void 0,e.alphabet=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","?","!",".","#","@","&","*","$","%","+","-","/","=","0","1","2","3","4","5","6","7","8","9","(",")",",","'",'"',":","_","-"],e.randChar=function(){return e.alphabet[Math.floor(Math.random()*e.alphabet.length)]}},799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.namedInput=e.appendChildren=e.createCanvas=e.h=void 0,e.h=(t,e={},s={})=>{const n=document.createElement(t);for(const[t,s]of Object.entries(e))n[t]=s;for(const t in s){const e=s[t];void 0!==e&&(n.style[t]=e)}return n},e.createCanvas=(t={},s={})=>{const n=e.h("canvas",t,s),o=n.getContext("2d");if(null===o)throw new Error("Could not create a 2d canvas");return[n,o]},e.appendChildren=(t,e)=>{for(const s of e)t.appendChild(s);return t},e.namedInput=(t,s)=>{const n=e.h("input",s),o=e.h("span",{textContent:"range"===s.type?`${t} : ${n.value}`:t}),a=e.appendChildren(e.h("div"),[o,n]);return n.addEventListener("change",(()=>{"range"===s.type&&(o.textContent=`${t} : ${n.value}`)})),{elem:a,value:()=>n.value}}},666:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mutationMethod=void 0,e.mutationMethod={flip:(t,e)=>{const s=t.getGenes(),n=s.length;for(let o=0;o<n;o++)t.randomNumber()<e&&(s[o]=t.randomGene())},swap:(t,e)=>{const s=t.getGenes(),n=s.length;for(let o=0;o<n;o++)if(t.randomNumber()<e){const t=Math.floor(Math.random()*n);[s[o],s[t]]=[s[t],s[o]]}}}},675:(t,e)=>{function s(t,e=0,o=t.length-1){const a=t[Math.floor((e+o)/2)].getFitness();if(e<o){const r=n(t,e,o,a);s(t,e,r-1),s(t,r,o)}}function n(t,e,s,n){for(;e<=s;){for(;t[e].getFitness()>n;)e++;for(;t[s].getFitness()<n;)s--;e<=s&&([t[e],t[s]]=[t[s],t[e]],e++,s--)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.selectKBest=void 0,e.selectKBest=function(t,e){return function(t,e,o=0,a=t.length-1){const r=t[Math.floor((o+a)/2)].getFitness();if(o<a){const i=n(t,o,a,r);s(t,o,i-1),i<e&&s(t,i,a)}}(t,e),t.slice(0,e)}}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,s),a.exports}(()=>{const t=s(799),e=s(827),n=(()=>{const s=t.namedInput("text",{type:"text",value:"DARWIN",onchange:u,onkeyup:u}),n=t.namedInput("blur radius",{type:"range",min:"0",max:"10",step:"1",value:"4",onchange:u}),o=t.namedInput("font size",{type:"range",min:"10",max:"40",step:"1",value:"30",onchange:u}),a=t.namedInput("population",{type:"range",min:"5",max:"1000",step:"1",value:"200",onchange:u}),r=t.h("p",{textContent:"generation: 0"}),i=t.h("p",{textContent:"best: "}),h=()=>{r.textContent=`generation: ${l.getPopulation().getGeneration()}`,i.textContent=`best: ${l.getCurrentBest().string}`},l=new e.Deblurrer({populationSize:parseInt(a.value()),target:s.value(),blurRadius:parseInt(n.value()),font:`${o.value()}px sans-serif`,onTick:h});function u(){l.update({populationSize:parseInt(a.value()),target:s.value(),blurRadius:parseInt(n.value()),font:`${o.value()}px sans-serif`,onTick:h}),l.tick(),m()}const p=t.appendChildren(t.h("div",{},{display:"flex",flexWrap:"wrap"}),l.getContexts().map((t=>t.canvas))),d=t.appendChildren(t.h("div"),[l.getTargetContext().canvas,s.elem,n.elem,o.elem,a.elem,r,i,t.h("button",{textContent:"start",onclick:()=>{l.start()}}),p]),m=()=>{console.log("rerender",l.getContexts().length),p.innerHTML="",t.appendChildren(p,l.getContexts().map((t=>t.canvas)))};return u(),d})();document.body.appendChild(n)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGFybGVzLmRhcndpbi8uL3NyYy9DaHJvbW9zb21lLnRzIiwid2VicGFjazovL2NoYXJsZXMuZGFyd2luLy4vc3JjL0Nyb3Nzb3Zlck1ldGhvZHMudHMiLCJ3ZWJwYWNrOi8vY2hhcmxlcy5kYXJ3aW4vLi9zcmMvRGFyd2luLnRzIiwid2VicGFjazovL2NoYXJsZXMuZGFyd2luLy4vc3JjL0RlbW9zL0RlYmx1clRleHQvRGVibHVyLnRzIiwid2VicGFjazovL2NoYXJsZXMuZGFyd2luLy4vc3JjL0RlbW9zL2NvbW1vbi9UZXh0LnRzIiwid2VicGFjazovL2NoYXJsZXMuZGFyd2luLy4vc3JjL0RlbW9zL2NvbW1vbi9VdGlscy50cyIsIndlYnBhY2s6Ly9jaGFybGVzLmRhcndpbi8uL3NyYy9NdXRhdGlvbk1ldGhvZC50cyIsIndlYnBhY2s6Ly9jaGFybGVzLmRhcndpbi8uL3NyYy9VdGlscy50cyIsIndlYnBhY2s6Ly9jaGFybGVzLmRhcndpbi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jaGFybGVzLmRhcndpbi8uL3NyYy9EZW1vcy9EZWJsdXJUZXh0L01haW4udHMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDaHJvbW9zb21lIiwiZ2VuZXMiLCJyYW5kb21HZW5lIiwicmFuZG9tTnVtYmVyIiwidGhpcyIsImZpdG5lc3MiLCJyYW5kR2VuZSIsInJhbmROdW0iLCJsZW5ndGgiLCJjb3VudCIsImkiLCJwdXNoIiwiZiIsImJvYiIsIk1hdGgiLCJtaW4iLCJtdXRhdGlvblJhdGUiLCJtdXRhdGVGbiIsImNyb3Nzb3ZlckZuIiwic2xpY2UiLCJjbG9uZSIsImdlbmVyYXRlIiwiY29weSIsImNyb3Nzb3Zlck1ldGhvZCIsInNpbmdsZVBvaW50IiwiYWxpY2UiLCJwIiwiZmxvb3IiLCJnZXRHZW5lcyIsInR3b1BvaW50IiwiYjEiLCJiMiIsImFsaWNlc0dlbmVzIiwiYm9ic0dlbmVzIiwiYWxpY2VDaHJvbW9MZW5ndGgiLCJwMSIsInAyIiwidW5pZm9ybSIsInN3YXAiLCJoYWxmVW5pZm9ybSIsImRpZmZCaXRzIiwiTiIsImlkeCIsInNwbGljZSIsIm9yZGVyZWQiLCJpbmYiLCJzdXAiLCJ0bXAiLCJtYXgiLCJpbmRleE9mIiwiaiIsIkRhcndpbiIsIkNocm9tb3NvbWVfMSIsIkNyb3Nzb3Zlck1ldGhvZHNfMSIsIk11dGF0aW9uTWV0aG9kXzEiLCJVdGlsc18xIiwicGFyYW1zIiwicG9wdWxhdGlvbiIsInN0YXRzTmVlZFVwZGF0ZSIsImdlbmVyYXRpb24iLCJhc3NpZ24iLCJjcm9zc292ZXJSYXRlIiwicG9wdWxhdGlvblNpemUiLCJtdXRhdGlvbk1ldGhvZCIsImZsaXAiLCJlbGl0ZUNvdW50IiwiY2VpbCIsImVsaXRlQ29waWVzIiwicmFuZG9tIiwiY2hyb21vIiwiY2hyb21vc29tZUxlbmd0aCIsInN0YXRzIiwiZml0dGVzdCIsImF2ZXJhZ2VGaXRuZXNzIiwidG90YWxGaXRuZXNzIiwiZml0dGVzdEluZGV4IiwibmV3UG9wdWxhdGlvbiIsImVsaXRlIiwiZ2V0VG9wQ2hyb21vc29tZXMiLCJtdW0iLCJnZXRSYW5kb21DaHJvbW9zb21lIiwiZGFkIiwiYmFieTEiLCJiYWJ5MiIsImNyb3Nzb3ZlcldpdGgiLCJwb3AiLCJjIiwibXV0YXRlV2l0aCIsImZpdG5lc3NFdmFsdWF0b3IiLCJzZXRGaXRuZXNzIiwiZHVwbGljYXRlRWxpdGUiLCJjcm9zc292ZXIiLCJtdXRhdGUiLCJpbmRleCIsInVwZGF0ZVN0YXRzIiwiciIsImFjY3VtdWxhdGVkRml0bmVzcyIsImdldEZpdG5lc3MiLCJzZWxlY3RLQmVzdCIsImZvcmNlVXBkYXRlIiwibWF4Rml0bmVzcyIsIkRlYmx1cnJlciIsInJlbmRlckJsdXJyZWRUZXh0IiwiRGFyd2luXzEiLCJUZXh0XzEiLCJjdHgiLCJ0ZXh0IiwiZm9udCIsImJsdXJSYWRpdXMiLCJjbGVhclJlY3QiLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImZpbHRlciIsImZpbGxUZXh0IiwiYmVzdEZpdG5lc3MiLCJiZXN0VGV4dCIsIm1lbW8iLCJNYXAiLCJpc1J1bm5pbmciLCJ1cGRhdGUiLCJ0YXJnZXRJbWFnZURhdGEiLCJyZW5kZXJUYXJnZXQiLCJ1cGRhdGVEYXJ3aW5QYXJhbXMiLCJnZW5lcmF0ZUNvbnRleHRzIiwidGFyZ2V0Q29udGV4dCIsImNyZWF0ZUNhbnZhcyIsImJvcmRlciIsImRhcndpblBhcmFtcyIsInJhbmRDaGFyIiwidGFyZ2V0IiwiXyIsIm1lYXN1cmVUZXh0IiwiZ2V0SW1hZ2VEYXRhIiwiY29udGV4dHMiLCJzaXplIiwiY2xlYXIiLCJ1cGRhdGVGaXRuZXNzIiwiY2hhcnMiLCJfYSIsImpvaW4iLCJoYXMiLCJzb3VyY2UiLCJkaWZmU3VtIiwiZGF0YSIsImRpZmYiLCJhYnMiLCJwb3ciLCJldmFsRml0bmVzcyIsImNvbnNvbGUiLCJsb2ciLCJzZXQiLCJnZXQiLCJvblRpY2siLCJtYXRlIiwidGljayIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJzdHJpbmciLCJhbHBoYWJldCIsIm5hbWVkSW5wdXQiLCJhcHBlbmRDaGlsZHJlbiIsImgiLCJuYW1lIiwicHJvcHMiLCJzdHlsZSIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wIiwiZW50cmllcyIsInJ1bGUiLCJ1bmRlZmluZWQiLCJjbnYiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJjaGlscmVuIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImlucHV0Iiwic3BhbiIsInRleHRDb250ZW50IiwidHlwZSIsImRpdiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtIiwiY2hyb21vc29tZSIsInF1aWNrc29ydCIsImFyciIsImZyb20iLCJ0byIsInBpdm90IiwicGFydGl0aW9uIiwiYXJyYXkiLCJsZWZ0IiwicmlnaHQiLCJrIiwicmV2ZXJzZVBhcnRpYWxRdWlja3NvcnQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiRGVibHVyXzEiLCJkb21FbGVtIiwib25jaGFuZ2UiLCJvblVwZGF0ZSIsIm9ua2V5dXAiLCJzdGVwIiwiZm9udFNpemUiLCJiZXN0IiwiZGVibHVycmVyIiwiZ2V0UG9wdWxhdGlvbiIsImdldEdlbmVyYXRpb24iLCJnZXRDdXJyZW50QmVzdCIsInBhcnNlSW50IiwicmVyZW5kZXIiLCJkaXNwbGF5IiwiZmxleFdyYXAiLCJnZXRDb250ZXh0cyIsIm1hcCIsImdldFRhcmdldENvbnRleHQiLCJvbmNsaWNrIiwic3RhcnQiLCJpbm5lckhUTUwiLCJzZXR1cCIsImJvZHkiXSwibWFwcGluZ3MiOiJzQ0FDQUEsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdERELEVBQVFFLGdCQUFhLEVBQ3JCLE1BQU1BLEVBQ0YsWUFBWUMsRUFBT0MsRUFBWUMsR0FDM0JDLEtBQUtILE1BQVEsR0FDYkcsS0FBS0MsUUFBVSxFQUNmRCxLQUFLRSxTQUFXSixFQUNoQkUsS0FBS0csUUFBVUosRUFDZkMsS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0ksT0FBU1AsRUFBTU8sT0FFeEIsZ0JBQWdCQyxFQUFPSCxFQUFVSCxHQUM3QixNQUFNRixFQUFRLEdBQ2QsSUFBSyxJQUFJUyxFQUFJLEVBQUdBLEVBQUlELEVBQU9DLElBQ3ZCVCxFQUFNVSxLQUFLTCxLQUVmLE9BQU8sSUFBSU4sRUFBV0MsRUFBT0ssRUFBVUgsR0FFM0MsYUFDSSxPQUFPQyxLQUFLQyxRQUVoQixXQUFXTyxHQUNQUixLQUFLQyxRQUFVTyxFQUduQixRQUFRQyxHQUNKLElBQUlKLEVBQVEsRUFDWixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUksS0FBS0MsSUFBSVgsS0FBS0ksT0FBUUssRUFBSUwsUUFBU0UsSUFDbkRELEdBQVNMLEtBQUtILE1BQU1TLEtBQU9HLEVBQUlaLE1BQU1TLEdBQUssRUFBSSxFQUVs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QVc3RyxTQUNoQzRHLEtBQU0sR0FBR3VHLEVBQVNuTix1QkFDbEIwSixXQUVKMkQsRUFBVXpELE9BQ1Y4RCxJQUVKLE1BQU1uRixFQUFXL0UsRUFBUTBHLGVBQWUxRyxFQUFRMkcsRUFBRSxNQUFPLEdBQUksQ0FDekR3RCxRQUFTLE9BQ1RDLFNBQVUsU0FDVlAsRUFBVVEsY0FBY0MsS0FBSXBILEdBQU9BLEVBQUlLLFVBQ3JDK0YsRUFBVXRKLEVBQVEwRyxlQUFlMUcsRUFBUTJHLEVBQUUsT0FBUSxDQUNyRGtELEVBQVVVLG1CQUFtQmhILE9BQzdCSixFQUFLK0UsS0FDTDdFLEVBQVc2RSxLQUNYeUIsRUFBU3pCLEtBQ1QzSCxFQUFlMkgsS0FDZjlILEVBQ0F3SixFQUNBNUosRUFBUTJHLEVBQUUsU0FBVSxDQUNoQm1CLFlBQWEsUUFDYjBDLFFBQVMsS0FFTFgsRUFBVVksV0FHbEIxRixJQUVFbUYsRUFBVyxLQUNicEUsUUFBUUMsSUFBSSxXQUFZOEQsRUFBVVEsY0FBY3BOLFFBQ2hEOEgsRUFBUzJGLFVBQVksR0FDckIxSyxFQUFRMEcsZUFBZTNCLEVBQVU4RSxFQUFVUSxjQUFjQyxLQUFJcEgsR0FBT0EsRUFBSUssV0FHNUUsT0FEQWlHLElBQ09GLEdBRUtxQixHQUNoQjNELFNBQVM0RCxLQUFLakQsWUFBWTJCLEkiLCJmaWxlIjoiZGVibHVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNocm9tb3NvbWUgPSB2b2lkIDA7XG5jbGFzcyBDaHJvbW9zb21lIHtcbiAgICBjb25zdHJ1Y3RvcihnZW5lcywgcmFuZG9tR2VuZSwgcmFuZG9tTnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZ2VuZXMgPSBbXTtcbiAgICAgICAgdGhpcy5maXRuZXNzID0gMDtcbiAgICAgICAgdGhpcy5yYW5kR2VuZSA9IHJhbmRvbUdlbmU7XG4gICAgICAgIHRoaXMucmFuZE51bSA9IHJhbmRvbU51bWJlcjtcbiAgICAgICAgdGhpcy5nZW5lcyA9IGdlbmVzO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGdlbmVzLmxlbmd0aDtcbiAgICB9XG4gICAgc3RhdGljIGdlbmVyYXRlKGNvdW50LCByYW5kR2VuZSwgcmFuZG9tTnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGdlbmVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgZ2VuZXMucHVzaChyYW5kR2VuZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENocm9tb3NvbWUoZ2VuZXMsIHJhbmRHZW5lLCByYW5kb21OdW1iZXIpO1xuICAgIH1cbiAgICBnZXRGaXRuZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maXRuZXNzO1xuICAgIH1cbiAgICBzZXRGaXRuZXNzKGYpIHtcbiAgICAgICAgdGhpcy5maXRuZXNzID0gZjtcbiAgICB9XG4gICAgLy8gcmV0dXJucyB0aGUgbnVtYmVyIG9mIGJpdHMgd2hpY2ggYXJlIGRpZmZlcmVudCA9IEhhbW1pbmcgZGlzdGFuY2VcbiAgICBjb21wYXJlKGJvYikge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKHRoaXMubGVuZ3RoLCBib2IubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgICBjb3VudCArPSB0aGlzLmdlbmVzW2ldICE9PSBib2IuZ2VuZXNbaV0gPyAxIDogMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIG11dGF0ZVdpdGgobXV0YXRpb25SYXRlID0gMSAvIHRoaXMubGVuZ3RoLCBtdXRhdGVGbikge1xuICAgICAgICBtdXRhdGVGbih0aGlzLCBtdXRhdGlvblJhdGUpO1xuICAgIH1cbiAgICBjcm9zc292ZXJXaXRoKGJvYiwgY3Jvc3NvdmVyRm4pIHtcbiAgICAgICAgcmV0dXJuIGNyb3Nzb3ZlckZuKHRoaXMsIGJvYik7XG4gICAgfVxuICAgIHNldEdlbmVzKGdlbmVzKSB7XG4gICAgICAgIHRoaXMuZ2VuZXMgPSBbLi4uZ2VuZXNdO1xuICAgIH1cbiAgICBnZXRHZW5lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXM7XG4gICAgfVxuICAgIGNvcHkoYm9iKSB7XG4gICAgICAgIHRoaXMuZ2VuZXMgPSBib2IuZ2VuZXMuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBib2IubGVuZ3RoO1xuICAgICAgICB0aGlzLnJhbmRHZW5lID0gYm9iLnJhbmRHZW5lO1xuICAgICAgICB0aGlzLmZpdG5lc3MgPSBib2IuZml0bmVzcztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGNsb25lID0gQ2hyb21vc29tZS5nZW5lcmF0ZSh0aGlzLmxlbmd0aCwgdGhpcy5yYW5kR2VuZSwgdGhpcy5yYW5kTnVtKTtcbiAgICAgICAgY2xvbmUuY29weSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgICByYW5kb21HZW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5kR2VuZSgpO1xuICAgIH1cbiAgICByYW5kb21OdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmROdW0oKTtcbiAgICB9XG59XG5leHBvcnRzLkNocm9tb3NvbWUgPSBDaHJvbW9zb21lO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyb3Nzb3Zlck1ldGhvZCA9IHZvaWQgMDtcbmV4cG9ydHMuY3Jvc3NvdmVyTWV0aG9kID0ge1xuICAgIHNpbmdsZVBvaW50OiAoYWxpY2UsIGJvYikgPT4ge1xuICAgICAgICBjb25zdCBwID0gTWF0aC5mbG9vcihhbGljZS5yYW5kb21OdW1iZXIoKSAqIGFsaWNlLmdldEdlbmVzKCkubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgYjEgPSBbLi4uYWxpY2UuZ2V0R2VuZXMoKS5zbGljZSgwLCBwKSwgLi4uYm9iLmdldEdlbmVzKCkuc2xpY2UocCldO1xuICAgICAgICBjb25zdCBiMiA9IFsuLi5ib2IuZ2V0R2VuZXMoKS5zbGljZSgwLCBwKSwgLi4uYWxpY2UuZ2V0R2VuZXMoKS5zbGljZShwKV07XG4gICAgICAgIHJldHVybiBbYjEsIGIyXTtcbiAgICB9LFxuICAgIHR3b1BvaW50OiAoYWxpY2UsIGJvYikgPT4ge1xuICAgICAgICBjb25zdCBiMSA9IFtdO1xuICAgICAgICBjb25zdCBiMiA9IFtdO1xuICAgICAgICBjb25zdCBhbGljZXNHZW5lcyA9IGFsaWNlLmdldEdlbmVzKCk7XG4gICAgICAgIGNvbnN0IGJvYnNHZW5lcyA9IGJvYi5nZXRHZW5lcygpO1xuICAgICAgICBjb25zdCBhbGljZUNocm9tb0xlbmd0aCA9IGFsaWNlLmdldEdlbmVzKCkubGVuZ3RoO1xuICAgICAgICBsZXQgcDEgPSBNYXRoLmZsb29yKGFsaWNlLnJhbmRvbU51bWJlcigpICogYWxpY2VDaHJvbW9MZW5ndGgpO1xuICAgICAgICBsZXQgcDIgPSBNYXRoLmZsb29yKGFsaWNlLnJhbmRvbU51bWJlcigpICogYWxpY2VDaHJvbW9MZW5ndGgpO1xuICAgICAgICBpZiAocDEgPiBwMikge1xuICAgICAgICAgICAgW3AxLCBwMl0gPSBbcDIsIHAxXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsaWNlQ2hyb21vTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGIxLnB1c2goaSA8IHAxID8gYWxpY2VzR2VuZXNbaV0gOiAoaSA8IHAyID8gYm9ic0dlbmVzW2ldIDogYWxpY2VzR2VuZXNbaV0pKTtcbiAgICAgICAgICAgIGIyLnB1c2goaSA8IHAxID8gYm9ic0dlbmVzW2ldIDogKGkgPCBwMiA/IGFsaWNlc0dlbmVzW2ldIDogYm9ic0dlbmVzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtiMSwgYjJdO1xuICAgIH0sXG4gICAgdW5pZm9ybTogKGFsaWNlLCBib2IpID0+IHtcbiAgICAgICAgY29uc3QgYjEgPSBbXTtcbiAgICAgICAgY29uc3QgYjIgPSBbXTtcbiAgICAgICAgY29uc3QgYWxpY2VzR2VuZXMgPSBhbGljZS5nZXRHZW5lcygpO1xuICAgICAgICBjb25zdCBib2JzR2VuZXMgPSBib2IuZ2V0R2VuZXMoKTtcbiAgICAgICAgY29uc3QgYWxpY2VDaHJvbW9MZW5ndGggPSBhbGljZS5nZXRHZW5lcygpLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGljZUNocm9tb0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzd2FwID0gYWxpY2UucmFuZG9tTnVtYmVyKCkgPCAwLjU7XG4gICAgICAgICAgICBiMS5wdXNoKHN3YXAgPyBib2JzR2VuZXNbaV0gOiBhbGljZXNHZW5lc1tpXSk7XG4gICAgICAgICAgICBiMi5wdXNoKHN3YXAgPyBhbGljZXNHZW5lc1tpXSA6IGJvYnNHZW5lc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtiMSwgYjJdO1xuICAgIH0sXG4gICAgaGFsZlVuaWZvcm06IChhbGljZSwgYm9iKSA9PiB7XG4gICAgICAgIGxldCBiMSA9IFtdO1xuICAgICAgICBsZXQgYjIgPSBbXTtcbiAgICAgICAgY29uc3QgYWxpY2VzR2VuZXMgPSBhbGljZS5nZXRHZW5lcygpO1xuICAgICAgICBjb25zdCBib2JzR2VuZXMgPSBib2IuZ2V0R2VuZXMoKTtcbiAgICAgICAgY29uc3QgYWxpY2VDaHJvbW9MZW5ndGggPSBhbGljZS5nZXRHZW5lcygpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZGlmZkJpdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGljZUNocm9tb0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYWxpY2VzR2VuZXNbaV0gIT09IGJvYnNHZW5lc1tpXSkge1xuICAgICAgICAgICAgICAgIGRpZmZCaXRzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgTiA9IGRpZmZCaXRzLmxlbmd0aDtcbiAgICAgICAgYjEgPSBhbGljZXNHZW5lcy5zbGljZSgpO1xuICAgICAgICBiMiA9IGJvYnNHZW5lcy5zbGljZSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBpZHggPSBNYXRoLmZsb29yKGFsaWNlLnJhbmRvbU51bWJlcigpICogZGlmZkJpdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGIxW2RpZmZCaXRzW2lkeF1dID0gYm9ic0dlbmVzW2RpZmZCaXRzW2lkeF1dO1xuICAgICAgICAgICAgYjJbZGlmZkJpdHNbaWR4XV0gPSBhbGljZXNHZW5lc1tkaWZmQml0c1tpZHhdXTtcbiAgICAgICAgICAgIGRpZmZCaXRzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbYjEsIGIyXTtcbiAgICB9LFxuICAgIG9yZGVyZWQ6IChhbGljZSwgYm9iKSA9PiB7XG4gICAgICAgIGNvbnN0IGIxID0gW107XG4gICAgICAgIGNvbnN0IGIyID0gW107XG4gICAgICAgIGNvbnN0IGFsaWNlc0dlbmVzID0gYWxpY2UuZ2V0R2VuZXMoKTtcbiAgICAgICAgY29uc3QgYm9ic0dlbmVzID0gYm9iLmdldEdlbmVzKCk7XG4gICAgICAgIGNvbnN0IGFsaWNlQ2hyb21vTGVuZ3RoID0gYWxpY2UuZ2V0R2VuZXMoKS5sZW5ndGg7XG4gICAgICAgIGxldCBpbmYgPSBNYXRoLmZsb29yKGFsaWNlLnJhbmRvbU51bWJlcigpICogYWxpY2VDaHJvbW9MZW5ndGgpO1xuICAgICAgICBsZXQgc3VwID0gTWF0aC5mbG9vcihhbGljZS5yYW5kb21OdW1iZXIoKSAqIGFsaWNlQ2hyb21vTGVuZ3RoKTtcbiAgICAgICAgbGV0IHRtcCA9IGluZjtcbiAgICAgICAgaW5mID0gTWF0aC5taW4oaW5mLCBzdXApO1xuICAgICAgICBzdXAgPSBNYXRoLm1heCh0bXAsIHN1cCk7XG4gICAgICAgIGZvciAobGV0IGkgPSBpbmY7IGkgPCBzdXA7IGkrKykge1xuICAgICAgICAgICAgYjFbaV0gPSBib2JzR2VuZXNbaV07XG4gICAgICAgICAgICBiMltpXSA9IGFsaWNlc0dlbmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxpY2VDaHJvbW9MZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGIxLmluZGV4T2YoYWxpY2VzR2VuZXNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGIxW2ldID0gYWxpY2VzR2VuZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFsaWNlQ2hyb21vTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIxLmluZGV4T2YoYWxpY2VzR2VuZXNbal0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYjFbaV0gPSBhbGljZXNHZW5lc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiMi5pbmRleE9mKGJvYnNHZW5lc1tpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYjJbaV0gPSBib2JzR2VuZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYnNHZW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYjIuaW5kZXhPZihib2JzR2VuZXNbal0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYjJbaV0gPSBib2JzR2VuZXNbal07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtiMSwgYjJdO1xuICAgIH1cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGFyd2luID0gdm9pZCAwO1xuY29uc3QgQ2hyb21vc29tZV8xID0gcmVxdWlyZShcIi4vQ2hyb21vc29tZVwiKTtcbmNvbnN0IENyb3Nzb3Zlck1ldGhvZHNfMSA9IHJlcXVpcmUoXCIuL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBNdXRhdGlvbk1ldGhvZF8xID0gcmVxdWlyZShcIi4vTXV0YXRpb25NZXRob2RcIik7XG5jb25zdCBVdGlsc18xID0gcmVxdWlyZShcIi4vVXRpbHNcIik7XG5jbGFzcyBEYXJ3aW4ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0c05lZWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmdlbmVyYXRpb24gPSAwO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oeyBjcm9zc292ZXJSYXRlOiAwLjcsIG11dGF0aW9uUmF0ZTogMSAvIHBhcmFtcy5wb3B1bGF0aW9uU2l6ZSwgY3Jvc3NvdmVyTWV0aG9kOiBDcm9zc292ZXJNZXRob2RzXzEuY3Jvc3NvdmVyTWV0aG9kLnNpbmdsZVBvaW50LCBtdXRhdGlvbk1ldGhvZDogTXV0YXRpb25NZXRob2RfMS5tdXRhdGlvbk1ldGhvZC5mbGlwLCBlbGl0ZUNvdW50OiBNYXRoLmNlaWwocGFyYW1zLnBvcHVsYXRpb25TaXplIC8gMjUpLCBlbGl0ZUNvcGllczogMSwgcmFuZG9tTnVtYmVyOiBNYXRoLnJhbmRvbSB9LCBwYXJhbXMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5wb3B1bGF0aW9uU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaHJvbW8gPSBDaHJvbW9zb21lXzEuQ2hyb21vc29tZS5nZW5lcmF0ZSh0aGlzLnBhcmFtcy5jaHJvbW9zb21lTGVuZ3RoLCB0aGlzLnBhcmFtcy5yYW5kb21HZW5lLCB0aGlzLnBhcmFtcy5yYW5kb21OdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5wb3B1bGF0aW9uLnB1c2goY2hyb21vKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRzID0ge1xuICAgICAgICAgICAgZml0dGVzdDogdGhpcy5wb3B1bGF0aW9uWzBdLFxuICAgICAgICAgICAgYXZlcmFnZUZpdG5lc3M6IDAsXG4gICAgICAgICAgICB0b3RhbEZpdG5lc3M6IDAsXG4gICAgICAgICAgICBmaXR0ZXN0SW5kZXg6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHVwbGljYXRlRWxpdGUobmV3UG9wdWxhdGlvbikge1xuICAgICAgICAvLyBFTElUSVNNIGkuZS4ga2VlcGluZyB0aGUgZml0dGVzdCBDaHJvbW9zb21lc1xuICAgICAgICBjb25zdCB7IGVsaXRlQ291bnQsIGVsaXRlQ29waWVzIH0gPSB0aGlzLnBhcmFtcztcbiAgICAgICAgaWYgKGVsaXRlQ291bnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlbGl0ZSA9IHRoaXMuZ2V0VG9wQ2hyb21vc29tZXMoZWxpdGVDb3VudCk7XG4gICAgICAgICAgICAvLyBLZWVwIHRoZSBmaXR0ZXN0IENocm9tb3NvbWVzXG4gICAgICAgICAgICBuZXdQb3B1bGF0aW9uLnB1c2goLi4uZWxpdGUpO1xuICAgICAgICAgICAgLy8gRHVwbGljYXRlIHRoZSBlbGl0ZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGl0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsaXRlQ29waWVzOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UG9wdWxhdGlvbi5wdXNoKGVsaXRlW2ldLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjcm9zc292ZXIobmV3UG9wdWxhdGlvbikge1xuICAgICAgICBjb25zdCB7IHBvcHVsYXRpb25TaXplLCBjcm9zc292ZXJSYXRlLCBjcm9zc292ZXJNZXRob2QsIHJhbmRvbUdlbmUsIHJhbmRvbU51bWJlciB9ID0gdGhpcy5wYXJhbXM7XG4gICAgICAgIHdoaWxlIChuZXdQb3B1bGF0aW9uLmxlbmd0aCA8IHBvcHVsYXRpb25TaXplKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucmFuZG9tTnVtYmVyKCkgPCBjcm9zc292ZXJSYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbXVtID0gdGhpcy5nZXRSYW5kb21DaHJvbW9zb21lKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGFkID0gdGhpcy5nZXRSYW5kb21DaHJvbW9zb21lKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgW2JhYnkxLCBiYWJ5Ml0gPSBtdW0uY3Jvc3NvdmVyV2l0aChkYWQsIGNyb3Nzb3Zlck1ldGhvZCk7XG4gICAgICAgICAgICAgICAgbmV3UG9wdWxhdGlvbi5wdXNoKG5ldyBDaHJvbW9zb21lXzEuQ2hyb21vc29tZShiYWJ5MSwgcmFuZG9tR2VuZSwgcmFuZG9tTnVtYmVyKSwgbmV3IENocm9tb3NvbWVfMS5DaHJvbW9zb21lKGJhYnkyLCByYW5kb21HZW5lLCByYW5kb21OdW1iZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBCZWNhdXNlIHdlIGFkZCB0d28gY2hyb21vc29tZXMgcGVyIGxvb3BcbiAgICAgICAgLy8gaWYgcG9wdWxhdGlvbl9zaXplIGlzIG9kZFxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucG9wdWxhdGlvblNpemUgJSAyID09PSAxKSB7XG4gICAgICAgICAgICBuZXdQb3B1bGF0aW9uLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG11dGF0ZShuZXdQb3B1bGF0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBuZXdQb3B1bGF0aW9uKSB7XG4gICAgICAgICAgICBjLm11dGF0ZVdpdGgodGhpcy5wYXJhbXMubXV0YXRpb25SYXRlLCB0aGlzLnBhcmFtcy5tdXRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgICAvLyBjLnNldEZpdG5lc3MoMCk7IC8vIHJlc2V0IGZpdG5lc3NcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBmaXRuZXNzIG9mIHRoZSBlbnRpcmUgcG9wdWxhdGlvblxuICAgICAqIGJ5IGV2YWx1YXRpbmcgdGhlIGZpdG5lc3Mgb2YgZWFjaCBjaHJvbW9zb21lXG4gICAgICogdXNpbmcgdGhlIGdpdmVuIGZ1bmN0aW9uXG4gICAgICovXG4gICAgdXBkYXRlRml0bmVzcyhmaXRuZXNzRXZhbHVhdG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaHJvbW8gPSB0aGlzLnBvcHVsYXRpb25baV07XG4gICAgICAgICAgICBjaHJvbW8uc2V0Rml0bmVzcyhmaXRuZXNzRXZhbHVhdG9yKGNocm9tby5nZXRHZW5lcygpLCBpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogZ2VuZXJhdGVzIGEgbmV3IGdlbmVyYXRpb25cbiAgICAgKiB0aGUgZml0bmVzcyBvZiBlYWNoIGNocm9tb3NvbWUgbXVzdCBiZSB1cGRhdGVkIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb25cbiAgICAgKiB1c2luZyBgc2V0Rml0bmVzc2Agb24gZWFjaCBjaHJvbW9zb21lIG9yIGB1cGRhdGVGaXRuZXNzYFxuICAgICAqL1xuICAgIG1hdGUoKSB7XG4gICAgICAgIGNvbnN0IG5ld1BvcHVsYXRpb24gPSBbXTtcbiAgICAgICAgLy8gRUxJVElTTVxuICAgICAgICB0aGlzLmR1cGxpY2F0ZUVsaXRlKG5ld1BvcHVsYXRpb24pO1xuICAgICAgICAvLyBSRVBST0RVQ1RJT05cbiAgICAgICAgdGhpcy5jcm9zc292ZXIobmV3UG9wdWxhdGlvbik7XG4gICAgICAgIHRoaXMubXV0YXRlKG5ld1BvcHVsYXRpb24pO1xuICAgICAgICAvLyB1cHRhdGUgdGhlIHBvcHVsYXRpb25cbiAgICAgICAgdGhpcy5wb3B1bGF0aW9uID0gbmV3UG9wdWxhdGlvbjtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uICs9IDE7XG4gICAgICAgIHRoaXMuc3RhdHNOZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgdGhlIGVudGlyZSBwb3B1bGF0aW9uXG4gICAgICovXG4gICAgZ2V0UG9wdWxhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgdGhlIGNocm9tb3NvbWUgYXQgaW5kZXggYGluZGV4YFxuICAgICAqL1xuICAgIGdldENocm9tb3NvbWVBdChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW2luZGV4XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgYSByYW5kb20gY2hyb21vc29tZSBmcm9tIHRoZSBwb3B1bGF0aW9uXG4gICAgICogd2hlcmUgdGhlIHByb2JhYmlsaXR5IG9mIGJlaW5nIHNlbGVjdGVkIGlzIHByb3BvcnRpb25hbCB0byB0aGUgZml0bmVzc1xuICAgICAqL1xuICAgIGdldFJhbmRvbUNocm9tb3NvbWUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHMoKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMudG90YWxGaXRuZXNzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW01hdGguZmxvb3IodGhpcy5wYXJhbXMucmFuZG9tTnVtYmVyKCkgKiB0aGlzLnBvcHVsYXRpb24ubGVuZ3RoKV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMucGFyYW1zLnJhbmRvbU51bWJlcigpICogdGhpcy5zdGF0cy50b3RhbEZpdG5lc3M7XG4gICAgICAgIGxldCBhY2N1bXVsYXRlZEZpdG5lc3MgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWNjdW11bGF0ZWRGaXRuZXNzICs9IHRoaXMucG9wdWxhdGlvbltpXS5nZXRGaXRuZXNzKCk7XG4gICAgICAgICAgICBpZiAoYWNjdW11bGF0ZWRGaXRuZXNzID4gcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25bMF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGVmZmljaWVudGx5IGNvbXB1dGVzIHRoZSBgY291bnRgIGJlc3QgY2hyb21vc29tZXNcbiAgICAgKiBpbiB0aGUgcG9wdWxhdGlvbiBiYXNlZCBvbiB0aGVpciBmaXRuZXNzXG4gICAgICovXG4gICAgZ2V0VG9wQ2hyb21vc29tZXMoY291bnQpIHtcbiAgICAgICAgcmV0dXJuIFV0aWxzXzEuc2VsZWN0S0Jlc3QodGhpcy5wb3B1bGF0aW9uLCBjb3VudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gY29uc3RydWN0IHRoaXMgRGFyd2luIGluc3RhbmNlXG4gICAgICovXG4gICAgZ2V0UGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGdlbmVyYXRpb25cbiAgICAgKi9cbiAgICBnZXRHZW5lcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBsYXRlc3Qgc3RhdGlzdGljcyxcbiAgICAgKiB0byBjb21wdXRlIGFuIHVwZGF0ZWQgdmVyc2lvbiBjYWxsIGB1cGRhdGVTdGF0c2BcbiAgICAgKi9cbiAgICBnZXRTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHVwZGF0ZSB0aGUgc3RhdGlzdGljcyBmb3IgdGhpcyBnZW5lcmF0aW9uXG4gICAgICogaWYgYGZvcmNlVXBkYXRlYCBpcyB0cnVlLCB1cGRhdGUgZXZlbiBpZiBgbWF0ZWBcbiAgICAgKiBoYXMgbm90IGJlZW4gY2FsbGVkXG4gICAgICovXG4gICAgdXBkYXRlU3RhdHMoZm9yY2VVcGRhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZm9yY2VVcGRhdGUgfHwgdGhpcy5zdGF0c05lZWRVcGRhdGUpIHtcbiAgICAgICAgICAgIGxldCB0b3RhbEZpdG5lc3MgPSAwO1xuICAgICAgICAgICAgbGV0IG1heEZpdG5lc3MgPSAwO1xuICAgICAgICAgICAgbGV0IGZpdHRlc3RJbmRleCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpdG5lc3MgPSB0aGlzLnBvcHVsYXRpb25baV0uZ2V0Rml0bmVzcygpO1xuICAgICAgICAgICAgICAgIHRvdGFsRml0bmVzcyArPSBmaXRuZXNzO1xuICAgICAgICAgICAgICAgIGlmIChmaXRuZXNzID4gbWF4Rml0bmVzcykge1xuICAgICAgICAgICAgICAgICAgICBtYXhGaXRuZXNzID0gZml0bmVzcztcbiAgICAgICAgICAgICAgICAgICAgZml0dGVzdEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRzLnRvdGFsRml0bmVzcyA9IHRvdGFsRml0bmVzcztcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuYXZlcmFnZUZpdG5lc3MgPSB0b3RhbEZpdG5lc3MgLyB0aGlzLnBhcmFtcy5wb3B1bGF0aW9uU2l6ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZml0dGVzdCA9IHRoaXMucG9wdWxhdGlvbltmaXR0ZXN0SW5kZXhdLmNsb25lKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmZpdHRlc3RJbmRleCA9IGZpdHRlc3RJbmRleDtcbiAgICAgICAgICAgIHRoaXMuc3RhdHNOZWVkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHM7XG4gICAgfVxufVxuZXhwb3J0cy5EYXJ3aW4gPSBEYXJ3aW47XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGVibHVycmVyID0gZXhwb3J0cy5yZW5kZXJCbHVycmVkVGV4dCA9IHZvaWQgMDtcbmNvbnN0IENyb3Nzb3Zlck1ldGhvZHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9Dcm9zc292ZXJNZXRob2RzXCIpO1xuY29uc3QgRGFyd2luXzEgPSByZXF1aXJlKFwiLi4vLi4vRGFyd2luXCIpO1xuY29uc3QgTXV0YXRpb25NZXRob2RfMSA9IHJlcXVpcmUoXCIuLi8uLi9NdXRhdGlvbk1ldGhvZFwiKTtcbmNvbnN0IFRleHRfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vVGV4dFwiKTtcbmNvbnN0IFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL1V0aWxzXCIpO1xuY29uc3QgbWF4UG9zc2libGVGaXRuZXNzID0gMTAwMDtcbmNvbnN0IGV2YWxGaXRuZXNzID0gKHNvdXJjZSwgdGFyZ2V0KSA9PiB7XG4gICAgbGV0IGRpZmZTdW0gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmRhdGEubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgY29uc3QgZGlmZiA9IE1hdGguYWJzKHRhcmdldC5kYXRhW2kgKyAzXSAtIHNvdXJjZS5kYXRhW2kgKyAzXSk7XG4gICAgICAgIGRpZmZTdW0gKz0gTWF0aC5wb3coKDI1NSAtIGRpZmYpLCAyKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgucG93KDEwMDAsIChkaWZmU3VtIC8gKE1hdGgucG93KDI1NSwgMikgKiBzb3VyY2UuZGF0YS5sZW5ndGggLyA0KSkpO1xufTtcbmNvbnN0IHJlbmRlckJsdXJyZWRUZXh0ID0gKGN0eCwgdGV4dCwgZm9udCwgYmx1clJhZGl1cykgPT4ge1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIGN0eC5mb250ID0gZm9udDtcbiAgICBjdHguZmlsdGVyID0gYGJsdXIoJHtibHVyUmFkaXVzfXB4KWA7XG4gICAgY3R4LmZpbGxUZXh0KHRleHQsIDIsIDMwKTtcbn07XG5leHBvcnRzLnJlbmRlckJsdXJyZWRUZXh0ID0gcmVuZGVyQmx1cnJlZFRleHQ7XG5jb25zdCBtZWFzdXJlVGV4dCA9ICh0ZXh0LCBmb250KSA9PiB7XG4gICAgY29uc3QgW18sIGN0eF0gPSBVdGlsc18xLmNyZWF0ZUNhbnZhcyh7IHdpZHRoOiAxMDAwLCBoZWlnaHQ6IDEwMCB9KTtcbiAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgcmV0dXJuIGN0eC5tZWFzdXJlVGV4dCh0ZXh0KTtcbn07XG5jbGFzcyBEZWJsdXJyZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLmJlc3RGaXRuZXNzID0gMDtcbiAgICAgICAgdGhpcy5iZXN0VGV4dCA9ICcnO1xuICAgICAgICB0aGlzLm1lbW8gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXBkYXRlID0gKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgICAgICB0aGlzLnRhcmdldEltYWdlRGF0YSA9IHRoaXMucmVuZGVyVGFyZ2V0KCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBuZXcgRGFyd2luXzEuRGFyd2luKHRoaXMudXBkYXRlRGFyd2luUGFyYW1zKCkpO1xuICAgICAgICAgICAgdGhpcy5iZXN0Rml0bmVzcyA9IDA7XG4gICAgICAgICAgICB0aGlzLmJlc3RUZXh0ID0gJyc7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ29udGV4dHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YXJnZXRDb250ZXh0ID0gVXRpbHNfMS5jcmVhdGVDYW52YXMoe30sIHtcbiAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBibGFjaydcbiAgICAgICAgfSlbMV07XG4gICAgICAgIHRoaXMudXBkYXRlKHBhcmFtcyk7XG4gICAgfVxuICAgIHVwZGF0ZShwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0KCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGFyd2luUGFyYW1zKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0cygpO1xuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBuZXcgRGFyd2luXzEuRGFyd2luKHRoaXMuZGFyd2luUGFyYW1zKTtcbiAgICAgICAgdGhpcy50YXJnZXRJbWFnZURhdGEgPSB0aGlzLnJlbmRlclRhcmdldCgpO1xuICAgIH1cbiAgICB1cGRhdGVEYXJ3aW5QYXJhbXMoKSB7XG4gICAgICAgIHRoaXMuZGFyd2luUGFyYW1zID0ge1xuICAgICAgICAgICAgcG9wdWxhdGlvblNpemU6IHRoaXMucGFyYW1zLnBvcHVsYXRpb25TaXplLFxuICAgICAgICAgICAgcmFuZG9tR2VuZTogVGV4dF8xLnJhbmRDaGFyLFxuICAgICAgICAgICAgY2hyb21vc29tZUxlbmd0aDogdGhpcy5wYXJhbXMudGFyZ2V0Lmxlbmd0aCxcbiAgICAgICAgICAgIG11dGF0aW9uTWV0aG9kOiBNdXRhdGlvbk1ldGhvZF8xLm11dGF0aW9uTWV0aG9kLmZsaXAsXG4gICAgICAgICAgICBjcm9zc292ZXJNZXRob2Q6IENyb3Nzb3Zlck1ldGhvZHNfMS5jcm9zc292ZXJNZXRob2QudW5pZm9ybSxcbiAgICAgICAgICAgIG11dGF0aW9uUmF0ZTogMC4xLFxuICAgICAgICAgICAgY3Jvc3NvdmVyUmF0ZTogMC45NVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5kYXJ3aW5QYXJhbXM7XG4gICAgfVxuICAgIHJlbmRlclRhcmdldCgpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCB9ID0gbWVhc3VyZVRleHQodGhpcy5wYXJhbXMudGFyZ2V0LCB0aGlzLnBhcmFtcy5mb250KTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoICsgNTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAzNTtcbiAgICAgICAgdGhpcy50YXJnZXRDb250ZXh0LmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIHRoaXMudGFyZ2V0Q29udGV4dC5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIGV4cG9ydHMucmVuZGVyQmx1cnJlZFRleHQodGhpcy50YXJnZXRDb250ZXh0LCB0aGlzLnBhcmFtcy50YXJnZXQsIHRoaXMucGFyYW1zLmZvbnQsIHRoaXMucGFyYW1zLmJsdXJSYWRpdXMpO1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxuICAgIGdlbmVyYXRlQ29udGV4dHMoKSB7XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmFtcy5wb3B1bGF0aW9uU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2goVXRpbHNfMS5jcmVhdGVDYW52YXMoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYmxhY2snXG4gICAgICAgICAgICB9KVsxXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgO1xuICAgIHRpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLm1lbW8uc2l6ZSA+IDEwMDAwKSB7XG4gICAgICAgICAgICB0aGlzLm1lbW8uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcHVsYXRpb24udXBkYXRlRml0bmVzcygoY2hhcnMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLmNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBjaGFycy5qb2luKCcnKTtcbiAgICAgICAgICAgIGV4cG9ydHMucmVuZGVyQmx1cnJlZFRleHQoY3R4LCB0ZXh0LCB0aGlzLnBhcmFtcy5mb250LCB0aGlzLnBhcmFtcy5ibHVyUmFkaXVzKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5tZW1vLmhhcyh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpdG5lc3MgPSBldmFsRml0bmVzcyhjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSwgdGhpcy50YXJnZXRJbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChmaXRuZXNzID4gdGhpcy5iZXN0Rml0bmVzcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJlc3RGaXRuZXNzID0gZml0bmVzcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXN0VGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYmVzdFRleHQsIHRoaXMuYmVzdEZpdG5lc3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm1lbW8uc2V0KHRleHQsIGZpdG5lc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMubWVtby5nZXQodGV4dCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMub25UaWNrKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5vblRpY2soKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcHVsYXRpb24ubWF0ZSgpO1xuICAgIH1cbiAgICA7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aWNrKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcgJiYgdGhpcy5iZXN0Rml0bmVzcyA8IG1heFBvc3NpYmxlRml0bmVzcykge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgICA7XG4gICAgZ2V0Q3VycmVudEJlc3QoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMuYmVzdFRleHQsXG4gICAgICAgICAgICBmaXRuZXNzOiB0aGlzLmJlc3RGaXRuZXNzXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFRhcmdldENvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldENvbnRleHQ7XG4gICAgfVxuICAgIGdldFBvcHVsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb247XG4gICAgfVxuICAgIGdldENvbnRleHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0cztcbiAgICB9XG59XG5leHBvcnRzLkRlYmx1cnJlciA9IERlYmx1cnJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yYW5kQ2hhciA9IGV4cG9ydHMuYWxwaGFiZXQgPSB2b2lkIDA7XG5leHBvcnRzLmFscGhhYmV0ID0gW1xuICAgICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywgJ2snLFxuICAgICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAndycsICd4JywgJ3knLCAneicsICcgJyxcbiAgICAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJyxcbiAgICAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onLCAnPycsICchJywgJy4nLCAnIycsICdAJywgJyYnLCAnKicsICckJywgJyUnLCAnKycsICctJywgJy8nLCAnPScsXG4gICAgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnKCcsICcpJywgJywnLCBcIidcIiwgJ1wiJywgJzonLCAnXycsICctJ1xuXTtcbmZ1bmN0aW9uIHJhbmRDaGFyKCkge1xuICAgIHJldHVybiBleHBvcnRzLmFscGhhYmV0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGV4cG9ydHMuYWxwaGFiZXQubGVuZ3RoKV07XG59XG5leHBvcnRzLnJhbmRDaGFyID0gcmFuZENoYXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubmFtZWRJbnB1dCA9IGV4cG9ydHMuYXBwZW5kQ2hpbGRyZW4gPSBleHBvcnRzLmNyZWF0ZUNhbnZhcyA9IGV4cG9ydHMuaCA9IHZvaWQgMDtcbmNvbnN0IGggPSAobmFtZSwgcHJvcHMgPSB7fSwgc3R5bGUgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xuICAgIGZvciAoY29uc3QgW3Byb3AsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcykpIHtcbiAgICAgICAgZWxlbWVudFtwcm9wXSA9IHZhbHVlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJ1bGUgaW4gc3R5bGUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZVtydWxlXTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcnVsZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudDtcbn07XG5leHBvcnRzLmggPSBoO1xuY29uc3QgY3JlYXRlQ2FudmFzID0gKHByb3BzID0ge30sIHN0eWxlID0ge30pID0+IHtcbiAgICBjb25zdCBjbnYgPSBleHBvcnRzLmgoJ2NhbnZhcycsIHByb3BzLCBzdHlsZSk7XG4gICAgY29uc3QgY3R4ID0gY252LmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKGN0eCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBjcmVhdGUgYSAyZCBjYW52YXNgKTtcbiAgICB9XG4gICAgcmV0dXJuIFtjbnYsIGN0eF07XG59O1xuZXhwb3J0cy5jcmVhdGVDYW52YXMgPSBjcmVhdGVDYW52YXM7XG5jb25zdCBhcHBlbmRDaGlsZHJlbiA9ICh0YXJnZXQsIGNoaWxyZW4pID0+IHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxyZW4pIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn07XG5leHBvcnRzLmFwcGVuZENoaWxkcmVuID0gYXBwZW5kQ2hpbGRyZW47XG5jb25zdCBuYW1lZElucHV0ID0gKG5hbWUsIHByb3BzKSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBleHBvcnRzLmgoJ2lucHV0JywgcHJvcHMpO1xuICAgIGNvbnN0IHNwYW4gPSBleHBvcnRzLmgoJ3NwYW4nLCB7IHRleHRDb250ZW50OiBwcm9wcy50eXBlID09PSAncmFuZ2UnID8gYCR7bmFtZX0gOiAke2lucHV0LnZhbHVlfWAgOiBuYW1lIH0pO1xuICAgIGNvbnN0IGRpdiA9IGV4cG9ydHMuYXBwZW5kQ2hpbGRyZW4oZXhwb3J0cy5oKCdkaXYnKSwgW3NwYW4sIGlucHV0XSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ3JhbmdlJykge1xuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGAke25hbWV9IDogJHtpbnB1dC52YWx1ZX1gO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbTogZGl2LFxuICAgICAgICB2YWx1ZTogKCkgPT4gaW5wdXQudmFsdWVcbiAgICB9O1xufTtcbmV4cG9ydHMubmFtZWRJbnB1dCA9IG5hbWVkSW5wdXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubXV0YXRpb25NZXRob2QgPSB2b2lkIDA7XG5leHBvcnRzLm11dGF0aW9uTWV0aG9kID0ge1xuICAgIGZsaXA6IChjaHJvbW9zb21lLCBtdXRhdGlvblJhdGUpID0+IHtcbiAgICAgICAgY29uc3QgZ2VuZXMgPSBjaHJvbW9zb21lLmdldEdlbmVzKCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGdlbmVzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNocm9tb3NvbWUucmFuZG9tTnVtYmVyKCkgPCBtdXRhdGlvblJhdGUpIHtcbiAgICAgICAgICAgICAgICBnZW5lc1tpXSA9IGNocm9tb3NvbWUucmFuZG9tR2VuZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzd2FwOiAoY2hyb21vc29tZSwgbXV0YXRpb25SYXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGdlbmVzID0gY2hyb21vc29tZS5nZXRHZW5lcygpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBnZW5lcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjaHJvbW9zb21lLnJhbmRvbU51bWJlcigpIDwgbXV0YXRpb25SYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgW2dlbmVzW2ldLCBnZW5lc1tqXV0gPSBbZ2VuZXNbal0sIGdlbmVzW2ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2VsZWN0S0Jlc3QgPSB2b2lkIDA7XG5mdW5jdGlvbiBzZWxlY3RLQmVzdChhcnJheSwgaykge1xuICAgIHJldmVyc2VQYXJ0aWFsUXVpY2tzb3J0KGFycmF5LCBrKTtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UoMCwgayk7XG59XG5leHBvcnRzLnNlbGVjdEtCZXN0ID0gc2VsZWN0S0Jlc3Q7XG5mdW5jdGlvbiBxdWlja3NvcnQoYXJyLCBmcm9tID0gMCwgdG8gPSBhcnIubGVuZ3RoIC0gMSkge1xuICAgIGNvbnN0IHBpdm90ID0gYXJyW01hdGguZmxvb3IoKGZyb20gKyB0bykgLyAyKV0uZ2V0Rml0bmVzcygpO1xuICAgIGlmIChmcm9tIDwgdG8pIHtcbiAgICAgICAgY29uc3QgcCA9IHBhcnRpdGlvbihhcnIsIGZyb20sIHRvLCBwaXZvdCk7XG4gICAgICAgIHF1aWNrc29ydChhcnIsIGZyb20sIHAgLSAxKTtcbiAgICAgICAgcXVpY2tzb3J0KGFyciwgcCwgdG8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJldmVyc2VQYXJ0aWFsUXVpY2tzb3J0KGFyciwgaywgZnJvbSA9IDAsIHRvID0gYXJyLmxlbmd0aCAtIDEpIHtcbiAgICBjb25zdCBwaXZvdCA9IGFycltNYXRoLmZsb29yKChmcm9tICsgdG8pIC8gMildLmdldEZpdG5lc3MoKTtcbiAgICBpZiAoZnJvbSA8IHRvKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXJ0aXRpb24oYXJyLCBmcm9tLCB0bywgcGl2b3QpO1xuICAgICAgICBxdWlja3NvcnQoYXJyLCBmcm9tLCBwIC0gMSk7XG4gICAgICAgIGlmIChwIDwgaykge1xuICAgICAgICAgICAgcXVpY2tzb3J0KGFyciwgcCwgdG8pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcGFydGl0aW9uKGFycmF5LCBsZWZ0LCByaWdodCwgcGl2b3QpIHtcbiAgICAvLyBwdXQgZXZlcnkgZWxlbWVudCBzbWFsbGVyIHRoYW4gdGhlIHBpdm90IHRvIGl0cyBsZWZ0XG4gICAgLy8gYW5kIGV2ZXJ5IGVsZW1lbnQgYmlnZ2VyIHRvIGl0cyByaWdodFxuICAgIC8vIHJldHVybmluZyB0aGUgcGl2b3QncyBwb3NpdGlvblxuICAgIHdoaWxlIChsZWZ0IDw9IHJpZ2h0KSB7XG4gICAgICAgIHdoaWxlIChhcnJheVtsZWZ0XS5nZXRGaXRuZXNzKCkgPiBwaXZvdCkge1xuICAgICAgICAgICAgbGVmdCsrO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhcnJheVtyaWdodF0uZ2V0Rml0bmVzcygpIDwgcGl2b3QpIHtcbiAgICAgICAgICAgIHJpZ2h0LS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICAgICAgICAgIFthcnJheVtsZWZ0XSwgYXJyYXlbcmlnaHRdXSA9IFthcnJheVtyaWdodF0sIGFycmF5W2xlZnRdXTtcbiAgICAgICAgICAgIGxlZnQrKztcbiAgICAgICAgICAgIHJpZ2h0LS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBVdGlsc18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9VdGlsc1wiKTtcbmNvbnN0IERlYmx1cl8xID0gcmVxdWlyZShcIi4vRGVibHVyXCIpO1xuY29uc3Qgc2V0dXAgPSAoKSA9PiB7XG4gICAgY29uc3QgdGV4dCA9IFV0aWxzXzEubmFtZWRJbnB1dCgndGV4dCcsIHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICB2YWx1ZTogJ0RBUldJTicsXG4gICAgICAgIG9uY2hhbmdlOiBvblVwZGF0ZSxcbiAgICAgICAgb25rZXl1cDogb25VcGRhdGVcbiAgICB9KTtcbiAgICBjb25zdCBibHVyUmFkaXVzID0gVXRpbHNfMS5uYW1lZElucHV0KCdibHVyIHJhZGl1cycsIHtcbiAgICAgICAgdHlwZTogJ3JhbmdlJyxcbiAgICAgICAgbWluOiAnMCcsXG4gICAgICAgIG1heDogJzEwJyxcbiAgICAgICAgc3RlcDogJzEnLFxuICAgICAgICB2YWx1ZTogJzQnLFxuICAgICAgICBvbmNoYW5nZTogb25VcGRhdGVcbiAgICB9KTtcbiAgICBjb25zdCBmb250U2l6ZSA9IFV0aWxzXzEubmFtZWRJbnB1dCgnZm9udCBzaXplJywge1xuICAgICAgICB0eXBlOiAncmFuZ2UnLFxuICAgICAgICBtaW46ICcxMCcsXG4gICAgICAgIG1heDogJzQwJyxcbiAgICAgICAgc3RlcDogJzEnLFxuICAgICAgICB2YWx1ZTogJzMwJyxcbiAgICAgICAgb25jaGFuZ2U6IG9uVXBkYXRlXG4gICAgfSk7XG4gICAgY29uc3QgcG9wdWxhdGlvblNpemUgPSBVdGlsc18xLm5hbWVkSW5wdXQoJ3BvcHVsYXRpb24nLCB7XG4gICAgICAgIHR5cGU6ICdyYW5nZScsXG4gICAgICAgIG1pbjogJzUnLFxuICAgICAgICBtYXg6ICcxMDAwJyxcbiAgICAgICAgc3RlcDogJzEnLFxuICAgICAgICB2YWx1ZTogJzIwMCcsXG4gICAgICAgIG9uY2hhbmdlOiBvblVwZGF0ZVxuICAgIH0pO1xuICAgIGNvbnN0IGdlbmVyYXRpb24gPSBVdGlsc18xLmgoJ3AnLCB7XG4gICAgICAgIHRleHRDb250ZW50OiAnZ2VuZXJhdGlvbjogMCdcbiAgICB9KTtcbiAgICBjb25zdCBiZXN0ID0gVXRpbHNfMS5oKCdwJywge1xuICAgICAgICB0ZXh0Q29udGVudDogJ2Jlc3Q6ICdcbiAgICB9KTtcbiAgICBjb25zdCBvblRpY2sgPSAoKSA9PiB7XG4gICAgICAgIGdlbmVyYXRpb24udGV4dENvbnRlbnQgPSBgZ2VuZXJhdGlvbjogJHtkZWJsdXJyZXIuZ2V0UG9wdWxhdGlvbigpLmdldEdlbmVyYXRpb24oKX1gO1xuICAgICAgICBiZXN0LnRleHRDb250ZW50ID0gYGJlc3Q6ICR7ZGVibHVycmVyLmdldEN1cnJlbnRCZXN0KCkuc3RyaW5nfWA7XG4gICAgfTtcbiAgICBjb25zdCBkZWJsdXJyZXIgPSBuZXcgRGVibHVyXzEuRGVibHVycmVyKHtcbiAgICAgICAgcG9wdWxhdGlvblNpemU6IHBhcnNlSW50KHBvcHVsYXRpb25TaXplLnZhbHVlKCkpLFxuICAgICAgICB0YXJnZXQ6IHRleHQudmFsdWUoKSxcbiAgICAgICAgYmx1clJhZGl1czogcGFyc2VJbnQoYmx1clJhZGl1cy52YWx1ZSgpKSxcbiAgICAgICAgZm9udDogYCR7Zm9udFNpemUudmFsdWUoKX1weCBzYW5zLXNlcmlmYCxcbiAgICAgICAgb25UaWNrXG4gICAgfSk7XG4gICAgZnVuY3Rpb24gb25VcGRhdGUoKSB7XG4gICAgICAgIGRlYmx1cnJlci51cGRhdGUoe1xuICAgICAgICAgICAgcG9wdWxhdGlvblNpemU6IHBhcnNlSW50KHBvcHVsYXRpb25TaXplLnZhbHVlKCkpLFxuICAgICAgICAgICAgdGFyZ2V0OiB0ZXh0LnZhbHVlKCksXG4gICAgICAgICAgICBibHVyUmFkaXVzOiBwYXJzZUludChibHVyUmFkaXVzLnZhbHVlKCkpLFxuICAgICAgICAgICAgZm9udDogYCR7Zm9udFNpemUudmFsdWUoKX1weCBzYW5zLXNlcmlmYCxcbiAgICAgICAgICAgIG9uVGlja1xuICAgICAgICB9KTtcbiAgICAgICAgZGVibHVycmVyLnRpY2soKTtcbiAgICAgICAgcmVyZW5kZXIoKTtcbiAgICB9XG4gICAgY29uc3QgY29udGV4dHMgPSBVdGlsc18xLmFwcGVuZENoaWxkcmVuKFV0aWxzXzEuaCgnZGl2Jywge30sIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBmbGV4V3JhcDogJ3dyYXAnXG4gICAgfSksIGRlYmx1cnJlci5nZXRDb250ZXh0cygpLm1hcChjdHggPT4gY3R4LmNhbnZhcykpO1xuICAgIGNvbnN0IGRvbUVsZW0gPSBVdGlsc18xLmFwcGVuZENoaWxkcmVuKFV0aWxzXzEuaCgnZGl2JyksIFtcbiAgICAgICAgZGVibHVycmVyLmdldFRhcmdldENvbnRleHQoKS5jYW52YXMsXG4gICAgICAgIHRleHQuZWxlbSxcbiAgICAgICAgYmx1clJhZGl1cy5lbGVtLFxuICAgICAgICBmb250U2l6ZS5lbGVtLFxuICAgICAgICBwb3B1bGF0aW9uU2l6ZS5lbGVtLFxuICAgICAgICBnZW5lcmF0aW9uLFxuICAgICAgICBiZXN0LFxuICAgICAgICBVdGlsc18xLmgoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHRDb250ZW50OiAnc3RhcnQnLFxuICAgICAgICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGRlYmx1cnJlci5yZXNldCgpO1xuICAgICAgICAgICAgICAgIGRlYmx1cnJlci5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgY29udGV4dHNcbiAgICBdKTtcbiAgICBjb25zdCByZXJlbmRlciA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3JlcmVuZGVyJywgZGVibHVycmVyLmdldENvbnRleHRzKCkubGVuZ3RoKTtcbiAgICAgICAgY29udGV4dHMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIFV0aWxzXzEuYXBwZW5kQ2hpbGRyZW4oY29udGV4dHMsIGRlYmx1cnJlci5nZXRDb250ZXh0cygpLm1hcChjdHggPT4gY3R4LmNhbnZhcykpO1xuICAgIH07XG4gICAgb25VcGRhdGUoKTtcbiAgICByZXR1cm4gZG9tRWxlbTtcbn07XG5jb25zdCBkb21FbGVtID0gc2V0dXAoKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9tRWxlbSk7XG4iXSwic291cmNlUm9vdCI6IiJ9